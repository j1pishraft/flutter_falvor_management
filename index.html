<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Flavor and Environment Management</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
</head>
<body>
<main>
    <h1>Welcome to Flutter Flavor Management Page</h1>
</main>

<p><b>**Note**:</b> This page has been created recently and its content will be updated soon. I also
    try to keep this page up to date if required</p><br>

<p>In Flutter:<br>
    <br>
    <b>Flavor:</b><br>
    <br>
    A "flavor" refers to a variation or version of an application that is tailored for specific use
    cases, audiences, or environments.
    Flavors are created by defining different configurations, such as API endpoints, app icons,
    branding, or features, for distinct instances of an app within the same codebase.
    Common use cases include developing different versions of an app (e.g., free and premium) or
    creating branded versions for different clients.<br>
    <br>
    <b>Environment:</b><br>
    <br>
    An "environment" in Flutter typically refers to the stage or context in which the application is
    running, such as development, staging, or production.
    Different environments have specific configurations (e.g., debug modes, API endpoints) that are
    essential for testing and deploying applications without modifying the source code.
    Environments help manage settings and behavior variations across development, testing, and
    production stages.<br>
    <br>
    In summary, flavors are used for creating different versions of an app with unique
    configurations, while environments are used to manage various stages of application development
    by adjusting settings and behaviors. Together, flavors and environments enhance the flexibility,
    maintainability, and scalability of Flutter applications.</p><br>
<br>
<p><b>**Note 1**:</b> having only environment doesn't allow you to have same app with different
    icon,
    name and identifier. For that you also need to setup flavor for your project.</p><br>
<p><b>**Note 2**:</b> Usually for environments you can create app_config.json to keep sensitive or
    environment-specific configuration outside your codebase (never pushed to any repo, it is
    saved on local machine or pushed by CI/CD pipeline tools during app deployment) and easily
    switch between configurations for different environments (development, staging,
    production) by modifying the app_config.json file.</p><br>

<p><b>Steps to create Environments</b><br></p>
<p><b>1. Create enum for your Environment </b><br></p>
<p>In your project directory create a file called app_env.dart to create class "Environment"</p><br>
<img src="./images/app_environment_enum.png" alt="app_env_enum"><br>
<br>

<p><b>2. Create main files </b><br></p>
<p>make a copy of main file and rename them based on how many environment you have<br></p>
<p>In my case I have two environments, dev and prod so I need to have 3 main file, one for dev, one
    for prod and on main_common.dart<br></p>

<img src="./images/rename_main_screen_shot.png" alt="rename_main_screen_shot"><br>

<p><b>3. Edit main files accordingly </b><br></p>
<p>Pass the environment variable to your mainCommon.dart<br></p>
<img src="./images/main_common.png" alt="main_common"><br>
<img src="./images/main_dev.png" alt="main_dev"><br>
<img src="./images/main_prod.png" alt="main_prod"><br>

<p><b>4.1. app_config.jason and config reader </b><br></p>
<p>As I mentioned earlier you might need to have have app_config.jason to keep your configuration
    more secure if no you can skipp this step<br></p>
<p>4.1.1 Create app_config.json with your set of configuration and include its directory to your
    .gitIgnore file . <br></p>
<p>4.2.2 Create a class called ConfigReader to parse app_config file data.<br></p>
<img src="./images/app_config_json.png" alt="app_config_json"><br>
<img src="./images/gitignore.png" alt="gitignore"><br>
<img src="./images/config_reader.png" alt="config_reader"><br>


<p><b>4.2. flavor_config.dart file </b><br></p>
<p>Alternatively you might want to have your configuration setup in your code therefore you need to
    create a class called FlavorConfig.dart <br></p>
<p>This is Singleton class that is holding the configuration data during development lifecycle, so
    you can access its member data anywhere is your code<br></p>
<img src="./images/flavor_config.png" alt="flavor_config"><br>

<p><b>5. Initialise ConfigReader() and FlavorConfig in mainCommon.dart </b><br></p>
<img src="./images/initialise_config_classes.png" alt="initialise_config_classes"><br>

<p><b>6. All up to now was to setup environments </b><br></p>
<p>Now you should be ready to run your app using different Environments by<br></p>
<p>6.1 Writing "flutter run -t lib/main_dev.dart" for "dev" and "flutter run -t lib/main_prod.dart"
    for "prod" environment is your terminal<br></p>
<p>6.2 Creating new Run Configuration on your IDE for all your environments<br></p>
<img src="./images/run_config_ide.png" alt="run_config_ide"><br>

<p><b>**Note**:</b> Keep in mind, as mentioned earlier the app will install based on current
    configuration and will replace the older installed version with the same name, icon and bundle
    identifier</p><br>
<br>
<br>

<p><b>Steps to create Environments</b><br></p>
<p><b>Now we go through to create flavor for both android and iOS</b><br></p>
<p><b>In order to setup flavor make sure to create environments (follow the above steps).</b><br>
</p>
<p><b>In this section we also demonstrate how to set up different Icons, Names, and bundle
    identifier for our project.</b><br></p>
<br>
<p><b>1. Android Setup </b><br></p>
<p><b>1.1 In android folder open build.gradle file under app folder and add the following block code
    after buildTypes{} block</b><br></p>
<p>This is a basic Configuration, there are more config that you can add like versionCode,
    versionName and applicationId<br></p>
<img src="./images/build_gradle_code.png" alt="build_gradle_code"><br>
<p><b>1.2.1 Create string.xml file for each flavor for application name</b><br></p>
<p>Under android/app/src directory create folders based on number of flavors you have. In my case we
    have dev/res/values/string.xml and prod/res/values/string.xml<br></p>
<img src="./images/app_name_xml_files.png" alt="app_name_xml_files"><br>
<p><b>1.2.2 Open android/app/src/main/manifest.xml</b><br></p>
<p>In manifest file add android:label="@string/app_name" inside application tag<br></p>
<img src="./images/manifest_xml.png" alt="manifest_xml"><br>

<p><b>1.3 Create app icons</b><br></p>
<p><b>**Note**:</b> This step will create assets for both android and iOS</p><br>
<p><b>1.3.1 add flutter_launcher_icons package in pubspec.yaml file under dev_dependencies:</b><br>
</p>
<img src="./images/pubspec_yaml.png" alt="pubspec_yaml"><br>
<p><b>1.3.2 Create assets/icons folder under project root directory and locate the icons file in
    this folder</b><br></p>
<p><b>**Note**:</b> icons sizes should be 512*512 in png format and make sure alpha filter is
    removed when you save the photo</p><br>
<img src="./images/icons.png" alt="icons"><br>
<img src="./images/alpha_filter.png" alt="alpha_filter"><br>
<p><b>1.3.3 Create flutter launcher yaml file for your flavors, flutter_launcher_icons-dev.yaml
    flutter_launcher_icons-prod.yaml </b><br></p>
<img src="./images/flutter_launcher_yaml.png" alt="flutter_launcher_yaml"><br>
<p><b>1.3.4 run the flutter pub run flutter_launcher_icons:main -f flutter_launcher_icons* command
    from terminal </b><br></p>
<p>Now the necessary icons assets will be created for both android and iOS (below image is for
    Android)<br></p>
<img src="./images/auto_generate_icons.png" alt="auto_generate_icons"><br>
<p><b>To test your app you can run your project by the following
    command: "flutter run --flavor prod -t lib/main_dev.dart"
    or "flutter run --flavor prod -t lib/main_prod.dart"</b><br></p>
<p><b>Alternatively you can setup run configuration on your IDE</b><br></p>
<img src="./images/dev_flavor_run_config.png" alt="dev_flavor_run_config"><br>
<img src="./images/prod_flavor_run_config.png" alt="prod_flavor_run_config"><br>
<p><b>Now based on your Flavor you will have separate app with different name and icon</b><br></p>
<p><b>For android you are all done.</b><br></p>
</body>
</html>
